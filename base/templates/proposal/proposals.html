{% extends "layout.html" %}
{% load staticfiles %}
{% load i18n %}
{% load bootstrap3 %}
{% comment "License" %}
    * OSIS stands for Open Student Information System. It's an application
    * designed to manage the core business of higher education institutions,
    * such as universities, faculties, institutes and professional schools.
    * The core business involves the administration of students, teachers,
    * courses, programs and so on.
    *
    * Copyright (C) 2015-2018 Universit√© catholique de Louvain (http://www.uclouvain.be)
    *
    * This program is free software: you can redistribute it and/or modify
    * it under the terms of the GNU General Public License as published by
    * the Free Software Foundation, either version 3 of the License, or
    * (at your option) any later version.
    *
    * This program is distributed in the hope that it will be useful,
    * but WITHOUT ANY WARRANTY; without even the implied warranty of
    * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    * GNU General Public License for more details.
    *
    * A copy of this license - GNU General Public License - is available
    * at the root of the source code of this program.  If not,
    * see http://www.gnu.org/licenses/.
{% endcomment %}
{% block breadcrumb %}
    <li><a href="{% url 'catalog' %}" id="lnk_catalog">{% trans 'formation_catalogue'%}</a></li>
    <li class="active" id="lnk_proposals">{% trans 'proposals' %}</li>
{% endblock %}

{% block content %}
    {% include "template_messages.html" %}
    <form style="border-bottom: 1px solid #ddd;" method="get"
          action="{% url 'learning_unit_proposal_search' %}"
          name="proposal_search" id="proposal_search_form">
        <div class="panel-body">
            <div class="row" style="margin-top:10px;">
                {% block search_form_row_1 %}
                    <div class="row">
                        <div class="col-md-2">
                            {% bootstrap_field form.academic_year_id %}
                        </div>
                        <div class="col-md-2">
                            {% bootstrap_field form.requirement_entity_acronym %}
                        </div>
                        <div class="col-md-2">
                        {% bootstrap_field form.entity_folder_id %}
                        </div>
                        <div class="col-md-2">
                            {% bootstrap_field form.folder_id %}
                        </div>
                        <div class="col-md-2">
                            {% bootstrap_field form.proposal_type %}
                        </div>
                        <div class="col-md-2">
                            {% bootstrap_field form.proposal_state %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            {% bootstrap_field form.acronym %}
                        </div>

                        <div class="col-md-1 text-right" style="line-height:55px;">
                            {% bootstrap_button "" value=_('search') button_type="submit" button_class="btn-primary" icon="search" %}
                        </div>
                    </div>
                {% endblock %}
            </div>
            <div class="row">
                {% bootstrap_form_errors form %}
            </div>
        </div>
    </form>
    {% include 'proposal/list.html' %}
{% endblock %}

{% block script %}
    <script>
        $(document).ready(function()
        {
            // Must be always DataTable declaration !!!
            setEventKeepIds('table_learning_units', 'learningUnitIds')

            $('#table_proposals').DataTable(
                    {
                        columnDefs: [
                            { targets: 3, type: 'diacritics-neutralise'}
                        ],
                        "stateSave": true,
                        "paging" : false,
                        "ordering" : true,
                        "info"  : false,
                        "searching" : false,
                        "language": {
                            "oAria": {
                                "sSortAscending":  "{% trans 'datatable_sortascending'%}",
                                "sSortDescending": "{% trans 'datatable_sortdescending'%}",
                            }
                        }
                    });
            });


    </script>
{% endblock %}
