{% extends "layout.html" %}
{% load staticfiles %}
{% load i18n %}

{% comment "License" %}
* OSIS stands for Open Student Information System. It's an application
* designed to manage the core business of higher education institutions,
* such as universities, faculties, institutes and professional schools.
* The core business involves the administration of students, teachers,
* courses, programs and so on.
*
* Copyright (C) 2015-2016 Universit√© catholique de Louvain (http://www.uclouvain.be)
*
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* A copy of this license - GNU General Public License - is available
* at the root of the source code of this program.  If not,
* see http://www.gnu.org/licenses/.
{% endcomment %}
{% block breadcrumb %}
<li><a href="{% url 'institution' %}" id="lnk_institution">{% trans 'institution' %}</a></li>
<li><a href="{% url 'mandates' %}" id="lnk_mandates">{% trans 'mandates' %}</a></li>
<li class="active">{% trans 'assistants' %}</li>
{% endblock %}
{% block content %}
<div class="container">
<div class="page-header">
    <h2>{% trans 'assistantship_mandate_renewal_part1' %}</h2>
</div>
<div class="panel panel-default">
  <div class="panel-body">
  <form method="post" action="{% url 'pst_form_part1_save' mandate.id %}">
      {% csrf_token %}
  <div class="row">
    <div class="col-xs-6 col-sm-3">
    <label>{% trans 'name_firstname' %}</label> :<p>
    <label>{% trans 'birthdate' %}</label> :<p>
    <label>{% trans 'address' %}</label> :<p>
    </div>
    <div class="col-xs-6 col-sm-6">
      <b>{{assistant.person}}</b><p>
      {{birthday}}<p>
      {% for address in addresses %}
      	{{address.location}} - {{address.postal_code}} {{address.city}}<br>{{address.country}}
      {% endfor %}
      <p>
    </div>
    <div class="col-xs-6 col-sm-3" align="right">
    <label>{% trans 'type_of_renewal' %}</label> : {{mandate.renewal_type}}<p>
    </div>
  </div>

  <hr>
  <b>{% trans 'contract' %}</b><p>
  <div class="row">
    <div class="col-xs-6 col-sm-3">
      {% trans 'faculty_institute' %} :<br>
      {% trans 'full_time_equivalent' %} :<br>
      {% trans 'date_of_first_nomination' %} :<br>
      {% trans 'field' %} :<br>
      {% trans 'grade' %} :<br>
    </div>
    <div class="col-xs-6 col-sm-9">
      {% for course in courses.all|slice:"1" %}
        {{ course.offer_year.entity_administration }}<br>
      {% endfor %}  
      {{mandate.fulltime_equivalent}}<br>
      {{mandate.entry_date}}<br>
      {{mandate.assistant_type}}<br>
      {{mandate.grade}}</p>
    </div>
   </div>
  <hr>
  <b>{% trans 'doctorate' %}</b><p>
    
    <div class="form-group">
      <div class="row">
        <div class="col-xs-6 col-sm-5">
          {% trans 'registered_phd' %} :
          <label class="radio-inline">
          <input type="radio" name="inscription" id="id_inscription_0" value="{{assistant.inscription}}" onChange="disablefield();">{% trans 'yes' %}
          </label>
          <label class="radio-inline">
          <input type="radio" name="inscription" id="id_inscription_1" value="{{assistant.inscription}}" onChange="disablefield();">{% trans 'no' %}
          </label>
          <label class="radio-inline">
          <input type="radio" name="inscription" id="id_inscription_2" value="{{assistant.inscription}}" onChange="disablefield();">{% trans 'in_progress' %}
          </label>                 
        </div>
        <div class="col-xs-6 col-sm-7">
          {% trans 'expected_registering_date' %} : 
          {{ form.expected_phd_date }}
        </div>
      </div>
      <div class="row"> 
        <div class="col-xs-6 col-sm-3">
           {% trans 'supervisor_email_address' %} :
        </div>
        <div class="col-xs-6 col-sm-4">
          <input  type="text" id="supervisor_email" name="supervisor" placeholder="{% trans 'firstname' %}.{% trans 'lastname' %}@uclouvain.be" size="30" value="{{assistant.supervisor}}">&nbsp;
        </div>
        <div class="col-xs-6 col-sm-3">
          <label class="checkbox-inline">
            <input type="checkbox" value="nosupervisor" id="no_supervisor" onChange="disablefield();">{% trans 'no_supervisor' %}
          </label>
        </div>        
      </div>
      <div class="row">  
        <div class="col-xs-6 col-sm-3"> 
          {% trans 'phd_inscription_date' %} :<br>&nbsp;
        </div>
        <div class="col-sm-6">     
          {{ form.phd_inscription_date }}
        </div>  
      </div>
      <div class="row">  
        <div class="col-xs-6 col-sm-3"> 
          {% trans 'confirmatory_test_date ' %} <br><font size="1">{% trans '2nd_renewal' %}</font> :        
        </div>     
        <div class="col-sm-6">     
          {{ form.confirmation_test_date }}
        </div>
          </div>
      <div class="row">      
        <div class="col-xs-6 col-sm-3"> 
          {% trans 'thesis_defence_date' %} :        
        </div>
        <div class="col-sm-6">     
          {{ form.thesis_date }}
        </div>
      </div>  
    </div>
    <hr>
    <b>{% trans 'various' %}</b>
    <p>{% trans 'function_outside_university' %} :  
    {{ form.external_functions }}</p>
    <p>{% trans 'external_post' %} :
    {{ form.external_contract }}</p>
    <div class="col-sm-6"> 
      <font size ="1">{% trans 'exceptional_justification' %} :
      </font>
    </div>
    <div class="col-sm-4">    
      {{ form.justification }}
    </div>
     <div class="col-sm-10">
      <button type="submit" class="btn btn-default">{% trans 'next_part' %}</button>
    </div>
    </form>
</div>
</div>
{% endblock %}

{% block script %}
  <script type="text/javascript">
    function disablefield(){
      if (document.getElementById('id_inscription_0').checked == 1){
        document.getElementById('id_expected_phd_date').disabled='disabled';
        document.getElementById('id_expected_phd_date').value='';
      }
      if (document.getElementById('id_inscription_1').checked == 1){
        document.getElementById('id_expected_phd_date').disabled='disabled';
        document.getElementById('id_expected_phd_date').value='';
      }
      if (document.getElementById('id_inscription_2').checked == 1){
        document.getElementById('id_expected_phd_date').disabled='';
        document.getElementById('id_expected_phd_date').value='{{assistant.expected_phd_date}}';
      }  
      if (document.getElementById('no_supervisor').checked == 1){
        document.getElementById('supervisor_email').disabled='disabled';
        document.getElementById('supervisor_email').value='';
      }    
      if (document.getElementById('no_supervisor').checked == 0){
        document.getElementById('supervisor_email').disabled='';
        document.getElementById('supervisor_email').request='request';
        document.getElementById('supervisor_email').value='';
      }          
    }
  </script>
{% endblock %}

{% block style %}
  <style>
    textarea{
      display:inline-block;
      vertical-align:middle;
    }
  </style>
  <style>
    .row [class*="col-"]{
      margin-bottom: -99999px;
      padding-bottom: 99999px;
    }
    .row{
      overflow: hidden;
    }
  </style>
{% endblock %}